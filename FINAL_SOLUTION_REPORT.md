# üéØ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã "–°–æ–∑–¥–∞–Ω–Ω—ã–µ –º–Ω–æ–π"

## üìÖ –î–∞—Ç–∞ —Ä–µ—à–µ–Ω–∏—è
17 –∞–≤–≥—É—Å—Ç–∞ 2025 –≥–æ–¥–∞

## üîç –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã

### **–ß—Ç–æ –±—ã–ª–æ –Ω–µ —Ç–∞–∫:**
–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤—ã—è—Å–Ω–∏–ª–æ—Å—å, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ **–ù–ï –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—è—Ö**, –∞ –≤ **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤**.

### **–ö–ª—é—á–µ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
–í –º–∞—Ä—à—Ä—É—Ç–µ `GET /api/persons/mine` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –ª–æ–≥–∏–∫–∞:
```sql
WHERE p.created_by = $1 OR p.created_by IS NULL
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–ª–æ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ–ª:
1. ‚úÖ **–°–≤–æ–∏ –ª–∏—á–Ω–æ—Å—Ç–∏** (–≥–¥–µ `created_by = userId`)
2. ‚ùå **–í–°–ï —Å—Ç–∞—Ä—ã–µ –ª–∏—á–Ω–æ—Å—Ç–∏** (–≥–¥–µ `created_by IS NULL`)

### **–ü–æ—á–µ–º—É —Å—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
–ú–∞—Ä—à—Ä—É—Ç `/api/mine/counts` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –ª–æ–≥–∏–∫—É:
```sql
WHERE created_by = $1
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –Ω–æ —Å–ø–∏—Å–æ–∫ –ø–æ–∫–∞–∑—ã–≤–∞–ª –≤—Å–µ –ª–∏—á–Ω–æ—Å—Ç–∏.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### **1. –ò—Å–ø—Ä–∞–≤–∏–ª–∏ –ª–æ–≥–∏–∫—É –≤ `/persons/mine`:**

**–ë–´–õ–û:**
```sql
WHERE p.created_by = $1 OR p.created_by IS NULL
```

**–°–¢–ê–õ–û:**
```sql
WHERE p.created_by = $1
```

### **2. –£–ª—É—á—à–∏–ª–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É:**

**–ë–´–õ–û:**
```sql
ORDER BY p.id DESC
```

**–°–¢–ê–õ–û:**
```sql
ORDER BY COALESCE(p.last_edited_at, p.draft_saved_at, p.submitted_at) DESC NULLS LAST, p.id DESC
```

–¢–µ–ø–µ—Ä—å –ª–∏—á–Ω–æ—Å—Ç–∏ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —á—Ç–æ –±–æ–ª–µ–µ –ª–æ–≥–∏—á–Ω–æ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ "–°–æ–∑–¥–∞–Ω–Ω—ã–µ –º–Ω–æ–π".

## üìä –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### **–•–æ—Ä–æ—à–∏–µ –Ω–æ–≤–æ—Å—Ç–∏:**
‚úÖ **–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è —É–∂–µ –µ—Å—Ç—å –≤ –±–∞–∑–µ!**

**–¢–∞–±–ª–∏—Ü–∞ `persons` —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- `status` - —Å—Ç–∞—Ç—É—Å –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (`approved`, `pending`, `rejected`, `draft`)
- `created_by` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ–∑–¥–∞–≤—à–µ–≥–æ –∑–∞–ø–∏—Å—å
- `updated_by` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ–±–Ω–æ–≤–∏–≤—à–µ–≥–æ –∑–∞–ø–∏—Å—å
- `is_draft` - —Ñ–ª–∞–≥ —á–µ—Ä–Ω–æ–≤–∏–∫–∞
- `draft_saved_at` - –≤—Ä–µ–º—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞
- `last_edited_at` - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `submitted_at` - –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
- `reviewed_at` - –≤—Ä–µ–º—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- `reviewed_by` - ID –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞
- `review_comment` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞

**–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è `achievements` –∏ `periods`** - –≤—Å–µ –ø–æ–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç.

## üéØ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### **–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
‚úÖ **–°—á–µ—Ç—á–∏–∫ –≤ –±–µ–π–¥–∂–µ** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ª–∏—á–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
‚úÖ **–°–ø–∏—Å–æ–∫ –ª–∏—á–Ω–æ—Å—Ç–µ–π** - —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ª–∏—á–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
‚úÖ **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** - –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è  
‚úÖ **–ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤** - —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é  
‚úÖ **–ú–æ–¥–µ—Ä–∞—Ü–∏—è** - approve/reject —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏  

### **–õ–æ–≥–∏–∫–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:**
1. **–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –ª–∏—á–Ω–æ—Å—Ç–∏
2. **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ª–∏—á–Ω–æ—Å—Ç–∏** (—Å `created_by = NULL`) –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–°–æ–∑–¥–∞–Ω–Ω—ã–µ –º–Ω–æ–π"
3. **–ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –∏ –º–æ–¥–µ—Ä–∞—Ü–∏—è** —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### **–ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ –±—É–¥—É—â–µ–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**

1. **–ü—Ä–∏–≤—è–∑–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:**
   ```sql
   -- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   UPDATE persons SET created_by = <admin_user_id> WHERE created_by IS NULL;
   ```

2. **–†–∞–∑–¥–µ–ª "–í—Å–µ –ª–∏—á–Ω–æ—Å—Ç–∏":**
   - –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –ª–∏—á–Ω–æ—Å—Ç–µ–π
   - –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ" –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

3. **–ú–∏–≥—Ä–∞—Ü–∏—è –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞:**
   - –°–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ —Å—Ç–∞—Ä—ã–º –∑–∞–ø–∏—Å—è–º
   - –û—Å–Ω–æ–≤—ã–≤–∞—Ç—å—Å—è –Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –º–µ—Ç—Ä–∏–∫–∞—Ö

## üìã –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã

1. **`src/routes/personRoutes.ts`** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `/persons/mine`
2. **`DB_SCHEMA.md`** - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
3. **–°–æ–∑–¥–∞–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∞–Ω–∞–ª–∏–∑–∞** (—É–¥–∞–ª–µ–Ω—ã –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é!** 

–ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è - –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è —É–∂–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ –ª–æ–≥–∏–∫–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä–∞—è —Ç–µ–ø–µ—Ä—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞.

**–†–∞–∑–¥–µ–ª "–°–æ–∑–¥–∞–Ω–Ω—ã–µ –º–Ω–æ–π" —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ª–∏—á–Ω–æ—Å—Ç–∏, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Å—á–∏—Ç–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞–∑–¥–µ–ª–æ–º "–°–æ–∑–¥–∞–Ω–Ω—ã–µ –º–Ω–æ–π"*
