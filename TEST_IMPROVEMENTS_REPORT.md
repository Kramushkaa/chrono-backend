# –û—Ç—á—ë—Ç –æ–± —É–ª—É—á—à–µ–Ω–∏—è—Ö —Ç–µ—Å—Ç–æ–≤ –∏ E2E

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**Backend Unit Tests:**
- ‚úÖ Routes: –¢–µ–ø–µ—Ä—å –≤—Å–µ –ø–æ–∫—Ä—ã—Ç—ã (–¥–æ–±–∞–≤–ª–µ–Ω–æ 5 —Ñ–∞–π–ª–æ–≤)
- ‚úÖ Services: –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- ‚úÖ Controllers: –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- ‚ö†Ô∏è Middleware: –ß–∞—Å—Ç–∏—á–Ω–æ (featureFlags –±–µ–∑ —Ç–µ—Å—Ç–æ–≤)
- ‚ö†Ô∏è Utils: –ß–∞—Å—Ç–∏—á–Ω–æ (logger –±–µ–∑ —Ç–µ—Å—Ç–æ–≤)

**Frontend Unit Tests:**
- ‚úÖ Hooks: –û—Ç–ª–∏—á–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- ‚úÖ Utils: –•–æ—Ä–æ—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- ‚ö†Ô∏è UI Components: –ß–∞—Å—Ç–∏—á–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–µ–∑ —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ API: –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

**E2E Tests:**
- ‚úÖ 16 —Ñ–∞–π–ª–æ–≤ —Ç–µ—Å—Ç–æ–≤ (~131 —Ç–µ—Å—Ç-–∫–µ–π—Å)
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ: auth, quiz, timeline, lists, manage, admin, accessibility, visual regression
- ‚úÖ Page Object Model –ø–∞—Ç—Ç–µ—Ä–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ coverage —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–í—ã—Å–æ–∫–∏–π) - Backend

#### 1. Middleware: featureFlags.test.ts
**–ü—Ä–æ–±–ª–µ–º–∞:** Middleware `ensureFeatureEnabled` –Ω–µ –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404/–∫–∞—Å—Ç–æ–º–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∫–æ–≥–¥–∞ —Ñ–∏—á–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫–æ–≥–¥–∞ —Ñ–∏—á–∞ –≤–∫–ª—é—á–µ–Ω–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –†–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ —Ñ–∏—á –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

**–§–∞–π–ª:** `src/__tests__/middleware/featureFlags.test.ts`

**–û—Ü–µ–Ω–∫–∞:** 15-30 –º–∏–Ω—É—Ç

#### 2. Utils: logger.test.ts
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–ª–∞—Å—Å Logger —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –º–µ—Ç–æ–¥–æ–≤ –Ω–µ –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤ –≤ dev vs production
- –ú–µ—Ç–æ–¥—ã: info, warn, error, debug
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã: dbError, authError, slowQuery, serviceError, securityEvent
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram –¥–ª—è security events
- JSON —Ñ–æ—Ä–º–∞—Ç –≤ production
- –ß–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –≤ development

**–§–∞–π–ª:** `src/__tests__/utils/logger.test.ts`

**–û—Ü–µ–Ω–∫–∞:** 1-2 —á–∞—Å–∞

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–°—Ä–µ–¥–Ω–∏–π) - Frontend UI Components

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–µ–∑ —Ç–µ—Å—Ç–æ–≤ –≤ `shared/ui`:

1. **Button.tsx** - –±–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: variants, sizes, loading state, disabled state, onClick
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ** –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ UI

2. **LoadingStates.tsx** / **LoadingSpinner** - —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã (persons, quiz, saving, deleting), —Ä–∞–∑–º–µ—Ä—ã, —Å–æ–æ–±—â–µ–Ω–∏—è

3. **SEO.tsx** - –º–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è SEO
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤, Open Graph, Twitter Cards

4. **PersonStructuredData.tsx** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (JSON-LD)
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Å—Ö–µ–º—ã, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

5. **EditWarningModal.tsx** - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –æ—Ç–º–µ–Ω–∞

6. **DraftModerationButtons.tsx** - –∫–Ω–æ–ø–∫–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: —Å–æ—Å—Ç–æ—è–Ω–∏—è, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π

7. **FormModal.tsx** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º–æ–¥–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: –æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—è, submit

8. **FilterDropdownContent.tsx** - —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∏–ª—å—Ç—Ä–∞
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–ø—Ü–∏–π, –≤—ã–±–æ—Ä, —Å–±—Ä–æ—Å

9. **GroupingToggle.tsx** - –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ

10. **ListSummary.tsx** - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞
    - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

11. **ListItemsView.tsx** - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞
    - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –ø–∞–≥–∏–Ω–∞—Ü–∏—è

12. **Skeleton.tsx** –∏ skeleton –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã - —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
    - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: –≤–∞—Ä–∏–∞–Ω—Ç—ã, —Ä–∞–∑–º–µ—Ä—ã

**–û—Ü–µ–Ω–∫–∞:** 3-4 —á–∞—Å–∞ –Ω–∞ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–°—Ä–µ–¥–Ω–∏–π) - –£–ª—É—á—à–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

#### 1. Edge Cases –≤ Routes —Ç–µ—Å—Ç–∞—Ö
**–¢–µ–∫—É—â–µ–µ:** –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ middleware
**–£–ª—É—á—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏

**–ü—Ä–∏–º–µ—Ä—ã:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (404, 401, 403, 500)
- Rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä—ã

**–û—Ü–µ–Ω–∫–∞:** 2-3 —á–∞—Å–∞

#### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã Services
**–¢–µ–∫—É—â–µ–µ:** –ú–Ω–æ–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è —Å –º–æ–∫–∞–º–∏
**–£–ª—É—á—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î (–≤ test —Å—Ö–µ–º–µ)

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –ö–∞—Å–∫–∞–¥–Ω—ã–µ —É–¥–∞–ª–µ–Ω–∏—è
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**–û—Ü–µ–Ω–∫–∞:** 4-6 —á–∞—Å–æ–≤

#### 3. Error Boundaries —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
**–¢–µ–∫—É—â–µ–µ:** –ï—Å—Ç—å –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã ErrorBoundary
**–£–ª—É—á—à–µ–Ω–∏–µ:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ Error Boundaries
- –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫ (rendering, lifecycle, async)

**–û—Ü–µ–Ω–∫–∞:** 1-2 —á–∞—Å–∞

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4 (–ù–∏–∑–∫–∏–π) - E2E —É–ª—É—á—à–µ–Ω–∏—è

#### 1. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ E2E coverage
**–¢–µ–∫—É—â–µ–µ:** 16 —Ñ–∞–π–ª–æ–≤, ~131 —Ç–µ—Å—Ç-–∫–µ–π—Å
**–£–ª—É—á—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

**–ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
- ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫ (offline, timeout, 500)
- ‚ùå –¢–µ—Å—Ç—ã —Å –º–µ–¥–ª–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º (throttling)
- ‚ùå –¢–µ—Å—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (stress testing)
- ‚ùå –ö—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚ùå –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (lighthouse, metrics)
- ‚ö†Ô∏è –¢–µ—Å—Ç—ã –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (—á–∞—Å—Ç–∏—á–Ω–æ –ø–æ–∫—Ä—ã—Ç–æ –≤ admin.spec.ts)
- ‚ö†Ô∏è –¢–µ—Å—Ç—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–æ–≤ (—á–∞—Å—Ç–∏—á–Ω–æ –ø–æ–∫—Ä—ã—Ç–æ –≤ lists.spec.ts)

**–û—Ü–µ–Ω–∫–∞:** 4-6 —á–∞—Å–æ–≤

#### 2. –£–ª—É—á—à–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ E2E —Ç–µ—Å—Ç–æ–≤
**–ü—Ä–æ–±–ª–µ–º—ã:**
- Flaky —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `waitFor` –≤–º–µ—Å—Ç–æ `waitForTimeout`
- –£–ª—É—á—à–∏—Ç—å –∏–∑–æ–ª—è—Ü–∏—é —Ç–µ—Å—Ç–æ–≤ (reset –ë–î –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ç–µ—Å—Ç–æ–º)
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- Retry –ª–æ–≥–∏–∫–∞ —É–∂–µ –µ—Å—Ç—å (—Ö–æ—Ä–æ—à–æ!)

**–û—Ü–µ–Ω–∫–∞:** 2-3 —á–∞—Å–∞

#### 3. Visual Regression —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
**–¢–µ–∫—É—â–µ–µ:** –ï—Å—Ç—å –±–∞–∑–æ–≤—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
**–£–ª—É—á—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- –í—Å–µ —Ç–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤ –∫–≤–∏–∑–∞
- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –≤ —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö
- –§–æ—Ä–º—ã —Å –æ—à–∏–±–∫–∞–º–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- Empty states –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- Error states (404, 500, network error)

**–û—Ü–µ–Ω–∫–∞:** 2-3 —á–∞—Å–∞

---

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### Frontend UI Components —Ç–µ—Å—Ç—ã

#### Button.test.tsx
```typescript
describe('Button', () => {
  it('should render with default props')
  it('should handle click events')
  it('should be disabled when disabled prop is true')
  it('should be disabled when loading is true')
  it('should show loading spinner when loading')
  it('should apply correct variant classes')
  it('should apply correct size classes')
  it('should not call onClick when disabled')
  it('should not call onClick when loading')
})
```

#### LoadingStates.test.tsx
```typescript
describe('LoadingStates', () => {
  it('should render with default message')
  it('should render with custom message')
  it('should render different types with correct messages')
  it('should apply size classes correctly')
  it('should have proper ARIA attributes')
})
```

### Backend Middleware —Ç–µ—Å—Ç—ã

#### featureFlags.test.ts
```typescript
describe('ensureFeatureEnabled', () => {
  it('should allow request when feature is enabled')
  it('should return 404 when feature is disabled (default)')
  it('should return custom status code when provided')
  it('should return custom message when provided')
  it('should work with different feature keys')
})
```

### Backend Utils —Ç–µ—Å—Ç—ã

#### logger.test.ts
```typescript
describe('Logger', () => {
  describe('formatLog', () => {
    it('should format as JSON in production')
    it('should format as readable in development')
  })
  
  describe('methods', () => {
    it('should log info messages')
    it('should log warn messages')
    it('should log error messages')
    it('should log debug messages only in dev')
  })
  
  describe('special methods', () => {
    it('should log db errors with context')
    it('should log auth errors with userId')
    it('should log slow queries')
    it('should log security events')
    it('should send Telegram notification for high/critical events')
  })
})
```

---

## üîÑ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### 1. Shared Test Utilities
**–ü—Ä–æ–±–ª–µ–º–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ —Ç–µ—Å—Ç–∞—Ö (mocks, helpers)

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å `__tests__/test-utils/` —Å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏:
- `renderWithProviders` - –¥–ª—è React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `createMockRequest` - –¥–ª—è Express —Ç–µ—Å—Ç–æ–≤
- `createTestData` - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–û—Ü–µ–Ω–∫–∞:** 2-3 —á–∞—Å–∞

### 2. Test Coverage –æ—Ç—á–µ—Ç—ã
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ coverage –æ—Ç—á–µ—Ç—ã –≤ CI/CD

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- Coverage badges –≤ README
- Minimum coverage thresholds (–Ω–∞–ø—Ä–∏–º–µ—Ä, 80%)
- PR comments —Å coverage diff
- Coverage –¥–ª—è E2E —Ç–µ—Å—Ç–æ–≤ (Playwright coverage)

**–û—Ü–µ–Ω–∫–∞:** 1-2 —á–∞—Å–∞

### 3. Test Performance
**–ü—Ä–æ–±–ª–µ–º–∞:** –í–æ–∑–º–æ–∂–Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ unit —Ç–µ—Å—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `--maxWorkers` –¥–ª—è Jest
- –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `jest.useFakeTimers()` –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

**–û—Ü–µ–Ω–∫–∞:** 1-2 —á–∞—Å–∞

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:

1. **Backend Unit Tests Coverage:**
   - Routes: 100% ‚úÖ (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ)
   - Services: 90%+ ‚úÖ (—Ö–æ—Ä–æ—à–æ)
   - Controllers: 90%+ ‚úÖ (—Ö–æ—Ä–æ—à–æ)
   - Middleware: 90%+ ‚ö†Ô∏è (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å featureFlags)
   - Utils: 85%+ ‚ö†Ô∏è (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å logger)

2. **Frontend Unit Tests Coverage:**
   - Hooks: 95%+ ‚úÖ (–æ—Ç–ª–∏—á–Ω–æ)
   - Utils: 90%+ ‚úÖ (—Ö–æ—Ä–æ—à–æ)
   - Components: 85%+ ‚ö†Ô∏è (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
   - API: 90%+ ‚úÖ (—Ö–æ—Ä–æ—à–æ)

3. **E2E Tests:**
   - Critical flows: 100% ‚úÖ (—Ö–æ—Ä–æ—à–æ)
   - Edge cases: 70%+ ‚ö†Ô∏è (–º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å)
   - Error scenarios: 60%+ ‚ö†Ô∏è (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)

---

## üéØ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –ù–µ–¥–µ–ª—è 1 (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1):
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è routes (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
2. –î–æ–±–∞–≤–∏—Ç—å `featureFlags.test.ts` (1-2 —á–∞—Å–∞)
3. –î–æ–±–∞–≤–∏—Ç—å `logger.test.ts` (2-3 —á–∞—Å–∞)

### –ù–µ–¥–µ–ª—è 2 (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2):
1. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
   - Button.test.tsx
   - LoadingStates.test.tsx
   - SEO.test.tsx
   - FormModal.test.tsx

### –ù–µ–¥–µ–ª—è 3 (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3):
1. –£–ª—É—á—à–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã (edge cases)
2. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è Services
3. –†–∞—Å—à–∏—Ä–∏—Ç—å Error Boundary —Ç–µ—Å—Ç—ã

### –ù–µ–¥–µ–ª—è 4 (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4):
1. –†–∞—Å—à–∏—Ä–∏—Ç—å E2E coverage (error scenarios, network issues)
2. –£–ª—É—á—à–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å E2E —Ç–µ—Å—Ç–æ–≤
3. –†–∞—Å—à–∏—Ä–∏—Ç—å Visual Regression —Ç–µ—Å—Ç—ã

---

## üí° Best Practices –¥–ª—è –±—É–¥—É—â–µ–≥–æ

### –ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤:

1. **AAA Pattern:** Arrange, Act, Assert
2. **Isolation:** –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º
3. **Clear naming:** `it('should do X when Y')`
4. **One assertion per test** (–∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ)
5. **Test edge cases:** null, undefined, empty, max values
6. **Mock –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
7. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ TypeScript** –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –º–æ–∫–æ–≤

### –î–ª—è E2E —Ç–µ—Å—Ç–æ–≤:

1. **Page Object Model** - —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚úÖ
2. **Explicit waits** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `waitFor`, –∏–∑–±–µ–≥–∞–π—Ç–µ `waitForTimeout`
3. **API –¥–ª—è setup** - —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API
4. **Cleanup** - –æ—á–∏—â–∞–π—Ç–µ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
5. **Tags** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `@smoke`, `@regression`, `@slow`
6. **Visual regression** - –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

–î–∞—Ç–∞ –æ—Ç—á—ë—Ç–∞: 2024-11-19

